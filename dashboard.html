<!DOCTYPE html>
<html lang="en" class="bg-[#09090d] text-white overflow-x-hidden dark">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet"/>
    <link href="https://cdn.lineicons.com/5.0/lineicons.css" rel="stylesheet" />
    
    <title>Private Auth - Dashboard</title>

    <script>
    if (window.history.replaceState) {
        window.history.replaceState(null, null, window.location.href);
    }
    </script>

    <link rel="stylesheet" href="https://cdn.tailwindcss.com/3.3.5">
    <script src="https://cdn.tailwindcss.com/3.3.5"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
</head>

<body>
    <div data-loader id="loader" class="bg-[#0f0f17] hidden">
        <div class="text-center grid h-screen place-items-center">
            <div role="status" class="mt-96">
                <svg aria-hidden="true" class="inline w-8 h-8 mr-2 text-[#09090d] animate-spin fill-blue-600"
                    viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"
                        fill="currentColor" />
                    <path
                        d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"
                        fill="currentFill" />
                </svg>
            </div>
            <div class="block mt-32">
                <span class="text-xs font-semibold text-gray-500">
                    Loading dashboard...
                </span>
            </div>
        </div>
    </div>

    <nav class="fixed z-30 w-full bg-[#0f0f17] border-[#09090d]">
    <div class="py-3 px-3 lg:px-5 lg:pl-3">
        <div class="flex justify-between items-center">
            <div class="flex justify-start items-center">
                <button type="button" id="toggleSidebarMobile" aria-expanded="true" aria-controls="sidebar"
                    class="p-2 mr-2 text-white rounded cursor-pointer lg:hidden hover:opacity-60 focus:ring-0">
                    <svg id="toggleSidebarMobileHamburger" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                            clip-rule="evenodd"></path>
                    </svg>
                    <svg id="toggleSidebarMobileClose" class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                            clip-rule="evenodd"></path>
                    </svg>
                </button>

                <a href="index.html">
                    <span class="text-2xl font-semibold text-white">Private Auth</span>
                </a>
            </div>

            <div class="ml-auto flex items-center">
                <button id="logoutBtn" class="text-white focus:ring-0 font-medium rounded-lg text-sm px-4 py-2 lg:px-5 lg:py-2.5 mr-2 bg-red-600 hover:opacity-80 focus:outline-none focus:ring-red-800 transition duration-200">
                    Logout
                </button>
            </div>
        </div>
    </div>
</nav>

<div class="flex overflow-hidden pt-16 bg-[#09090d]">
    
<style>
/* Hide vertical scrollbar for Webkit-based browsers (e.g., Chrome, Safari) */
*::-webkit-scrollbar {
    display: none;
}
</style>

<aside id="sidebar"
    class="flex hidden fixed top-0 left-0 z-20 flex-col flex-shrink-0 pt-16 w-64 h-full duration-200 lg:flex transition-width"
    aria-label="Sidebar">
    <div class="flex relative flex-col flex-1 pt-0 min-h-0 bg-[#0f0f17] border-r border-[#0f0f17]">
        <div class="flex overflow-y-auto flex-col flex-1 pt-5 pb-4">
            <div class="flex-1 px-3 space-y-1 bg-[#0f0f17] mt-8">
                
<div class="w-full max-w-sm border border-gray-700 rounded-lg shadow">
    <div class="flex justify-end px-4 pt-2">
        <button id="dropdownButton" class="inline-block text-gray-500 hover:opacity-60 focus:ring-0 p-1.5" type="button">
            <span class="sr-only">Open dropdown</span>
            <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 3">
                <path d="M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z" />
            </svg>
        </button>
    </div>

    <div class="flex items-center px-4 pb-4 ml-6">
        <div class="w-12 h-12 rounded-full mr-3 bg-blue-600 flex items-center justify-center">
            <i class="ri-user-line text-white text-xl"></i>
        </div>

        <div class="ml-4 flex flex-col mr-4">
            <h5 class="text-lg font-medium text-blue-700 ml-5" id="userDisplayName">Loading...</h5>
            <label class="text-sm text-gray-400"><b>Expires:</b> Never </label>        
        </div>
    </div>

    <div class="px-4 pb-4">
        <p class="text-center text-transparent bg-clip-text bg-gradient-to-r to-blue-600 from-sky-400 text-xs font-black px-1.5 py-0.5 rounded border mb-2">ADMIN PLAN</p>    
    </div>
</div>
<br>
                <div class="mb-4 border-b border-[#0f0f17]">
                    <ul class="grid grid-cols-3 -mb-px text-sm font-medium text-center" id="myTab"
                        data-tabs-toggle="#myTabContent" role="tablist">                  
                        <li class="mr-2" role="presentation">
                            <button class="inline-block p-4 rounded-t-lg hover:opacity-60" id="app-tab"
                                data-tabs-target="#app" type="button" role="tab" aria-controls="app" data-tbt="app"
                                aria-selected="false">App</button>
                        </li>
                    </ul>
                </div>

                <div id="myTabContent">
                    <div class="hidden p-4 rounded-lg bg-[#0f0f17]" id="app" role="tabpanel" aria-labelledby="app-tab">
                        <ul class="space-y-2 font-medium">
                            <li>
                                <a href="#licenses" onclick="showSection('licenses')"
                                    class="flex items-center p-2 rounded-lg text-gray-300 hover:opacity-60 hover:bg-blue-700 group">
                                    <i class="ri-key-2-fill"></i>
                                    <span class="ml-3">Licenses</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href="#users" onclick="showSection('users')"
                                    class="flex items-center p-2 rounded-lg text-gray-300 hover:opacity-60 hover:bg-blue-700 group">
                                    <i class="ri-group-line"></i>
                                    <span class="ml-3">Users</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href="#api-credentials" onclick="showSection('api-credentials')"
                                    class="flex items-center p-2 rounded-lg text-gray-300 hover:opacity-60 hover:bg-blue-700 group">
                                    <i class="ri-code-s-slash-line"></i>
                                    <span class="ml-3">API Credentials</span>
                                </a>
                            </li>
                            
                            <li>
                                <a href="settings.html"
                                    class="flex items-center p-2 rounded-lg text-gray-300 hover:opacity-60 hover:bg-blue-700 group">
                                    <i class="ri-tools-line"></i>
                                    <span class="ml-3">Settings</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</aside>

<main class="relative w-full h-full overflow-y-auto lg:ml-64">
    <div class="p-4">
        
        <!-- Licenses Section -->
        <div id="licenses-section" class="section">
            <div class="mb-6">
                <h1 class="text-3xl font-bold text-white mb-2">Licenses Management</h1>
                <p class="text-gray-400">Create and manage license keys for your application</p>
            </div>
            
            <!-- Create License Form -->
            <div class="bg-[#0f0f17] rounded-lg p-6 mb-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-white">Create New License</h2>
                <form id="createLicenseForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">License Key</label>
                            <input type="text" id="licenseKey" class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500" placeholder="Auto-generated" readonly>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Expiry Date</label>
                            <input type="datetime-local" id="expiryDate" class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Description</label>
                        <input type="text" id="licenseDescription" class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500" placeholder="License description">
                    </div>
                    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition duration-200">
                        <i class="ri-add-line mr-2"></i>Create License
                    </button>
                </form>
            </div>

            <!-- Licenses List -->
            <div class="bg-[#0f0f17] rounded-lg p-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-white">Active Licenses</h2>
                <div id="licensesList" class="space-y-2">
                    <!-- Licenses will be populated here -->
                </div>
            </div>
        </div>

        <!-- API Credentials Section -->
        <div id="api-credentials-section" class="section hidden">
            <div class="mb-6">
                <h1 class="text-3xl font-bold text-white mb-2">API Credentials</h1>
                <p class="text-gray-400">Use these credentials to integrate with your C# application</p>
            </div>
            
            <!-- API Credentials Display -->
            <div class="bg-[#0f0f17] rounded-lg p-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-white">Integration Code</h2>
                
                <!-- C# Integration Code -->
                <div class="bg-gray-900 rounded-lg p-4 mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm text-gray-400">C# Integration</span>
                        <button onclick="copyToClipboard('csharp-code')" class="text-blue-400 hover:text-blue-300 text-sm">
                            <i class="ri-file-copy-line mr-1"></i>Copy
                        </button>
                    </div>
                    <pre id="csharp-code" class="text-green-400 text-sm overflow-x-auto"><code>// Initialize KeyAuth API
public static KeyAuthAPI KeyAuthApp = new KeyAuthAPI(
    name: "EXM",                    // App name - USER CAN CHANGE THIS
    ownerid: "X3lapZ9vPT",         // Account ID - USER CAN CHANGE THIS  
    version: "1.5"                 // Application version - USER CAN CHANGE THIS
);</code></pre>
                </div>

                <!-- API Details -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                        <h3 class="text-white font-semibold mb-2">API Server URL</h3>
                        <div class="flex items-center">
                            <input type="text" id="apiUrl" value="https://api-s736.onrender.com/api" readonly 
                                class="flex-1 bg-gray-700 text-white px-3 py-2 rounded border border-gray-600 text-sm">
                            <button onclick="copyToClipboard('apiUrl')" class="ml-2 text-blue-400 hover:text-blue-300">
                                <i class="ri-file-copy-line"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                        <h3 class="text-white font-semibold mb-2">App Name</h3>
                        <div class="flex items-center">
                            <input type="text" id="appName" value="EXM" readonly 
                                class="flex-1 bg-gray-700 text-white px-3 py-2 rounded border border-gray-600 text-sm">
                            <button onclick="copyToClipboard('appName')" class="ml-2 text-blue-400 hover:text-blue-300">
                                <i class="ri-file-copy-line"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                        <h3 class="text-white font-semibold mb-2">Owner ID</h3>
                        <div class="flex items-center">
                            <input type="text" id="ownerId" value="X3lapZ9vPT" readonly 
                                class="flex-1 bg-gray-700 text-white px-3 py-2 rounded border border-gray-600 text-sm">
                            <button onclick="copyToClipboard('ownerId')" class="ml-2 text-blue-400 hover:text-blue-300">
                                <i class="ri-file-copy-line"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                        <h3 class="text-white font-semibold mb-2">Version</h3>
                        <div class="flex items-center">
                            <input type="text" id="version" value="1.5" readonly 
                                class="flex-1 bg-gray-700 text-white px-3 py-2 rounded border border-gray-600 text-sm">
                            <button onclick="copyToClipboard('version')" class="ml-2 text-blue-400 hover:text-blue-300">
                                <i class="ri-file-copy-line"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Usage Instructions -->
                <div class="mt-6 bg-blue-900/20 border border-blue-700 rounded-lg p-4">
                    <h3 class="text-blue-400 font-semibold mb-2">
                        <i class="ri-information-line mr-2"></i>How to Use
                    </h3>
                    <ul class="text-gray-300 text-sm space-y-1">
                        <li>• Copy the C# integration code above</li>
                        <li>• Paste it into your C# application</li>
                        <li>• Change the app name, owner ID, and version as needed</li>
                        <li>• Use <code class="bg-gray-700 px-1 rounded">KeyAuthApp.Login(username, password)</code> to authenticate users</li>
                        <li>• Use <code class="bg-gray-700 px-1 rounded">KeyAuthApp.Register(username, password, licenseKey)</code> to register users</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Users Section -->
        <div id="users-section" class="section hidden">
            <div class="mb-6">
                <h1 class="text-3xl font-bold text-white mb-2">Users Management</h1>
                <p class="text-gray-400">Create and manage user accounts</p>
            </div>
            
            <!-- Create User Form -->
            <div class="bg-[#0f0f17] rounded-lg p-6 mb-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-white">Create New User</h2>
                <form id="createUserForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Username</label>
                            <input type="text" id="username" class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Password</label>
                            <input type="password" id="password" class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500" required>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Expiry Date</label>
                            <input type="datetime-local" id="userExpiryDate" class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">License Key</label>
                            <select id="userLicenseKey" class="w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500">
                                <option value="">Select License</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition duration-200">
                        <i class="ri-user-add-line mr-2"></i>Create User
                    </button>
                </form>
            </div>

            <!-- Users List -->
            <div class="bg-[#0f0f17] rounded-lg p-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-white">Active Users</h2>
                <div id="usersList" class="space-y-2">
                    <!-- Users will be populated here -->
                </div>
            </div>
        </div>
    </div>
</main>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAAN-l7ZRCMw8opvJWCZJAFXI5SM8k0vNs",
            authDomain: "our-auth-165db.firebaseapp.com",
            databaseURL: "https://our-auth-165db-default-rtdb.firebaseio.com",
            projectId: "our-auth-165db",
            storageBucket: "our-auth-165db.firebasestorage.app",
            messagingSenderId: "1064730108871",
            appId: "1:1064730108871:web:e3347d3ec217431f35efe2",
            measurementId: "G-KG1EEXQF51"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        auth.onAuthStateChanged((user) => {
            if (!user) {
                window.location.href = 'inbex.html';
            } else {
                document.getElementById('userDisplayName').textContent = user.displayName || user.email;
                document.getElementById('loader').classList.add('hidden');
            }
        });

        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(sectionName + '-section').classList.remove('hidden');
        }

        function generateLicenseKey() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < 16; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        document.getElementById('licenseKey').value = generateLicenseKey();

        document.getElementById('createLicenseForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const licenseKey = document.getElementById('licenseKey').value;
            const expiryDate = document.getElementById('expiryDate').value;
            const description = document.getElementById('licenseDescription').value;
            
            try {
                const response = await fetch('https://api-s736.onrender.com/api/create_license', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        key: licenseKey,
                        expiry: expiryDate,
                        description: description
                    })
                });
                
                if (response.ok) {
                    alert('License created successfully!');
                    loadLicenses();
                    
                    document.getElementById('licenseKey').value = generateLicenseKey();
                    document.getElementById('expiryDate').value = '';
                    document.getElementById('licenseDescription').value = '';
                } else {
                    alert('Failed to create license. Please try again.');
                }
            } catch (error) {
                console.error('Error creating license:', error);
                alert('Error creating license. Please check your connection.');
            }
        });

        document.getElementById('createUserForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const expiryDate = document.getElementById('userExpiryDate').value;
            const licenseKey = document.getElementById('userLicenseKey').value;
            
            try {
                const response = await fetch('https://api-s736.onrender.com/api/create_user', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: username,
                        password: password,
                        expiry: expiryDate,
                        licenseKey: licenseKey
                    })
                });
                
                if (response.ok) {
                    alert('User created successfully!');
                    loadUsers();
                    
                    document.getElementById('createUserForm').reset();
                } else {
                    alert('Failed to create user. Please try again.');
                }
            } catch (error) {
                console.error('Error creating user:', error);
                alert('Error creating user. Please check your connection.');
            }
        });

        async function loadLicenses() {
            try {
                const response = await fetch('https://api-s736.onrender.com/api/get_licenses');
                const licenses = await response.json();
                const licensesList = document.getElementById('licensesList');
                
                if (licenses.length === 0) {
                    licensesList.innerHTML = '<p class="text-gray-400">No licenses created yet.</p>';
                    return;
                }
                
                licensesList.innerHTML = licenses.map(license => `
                    <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                        <div class="flex justify-between items-center">
                            <div>
                                <h3 class="font-semibold text-white">${license.key}</h3>
                                <p class="text-gray-400 text-sm">${license.description || 'No description'}</p>
                                <p class="text-gray-400 text-sm">Expires: ${new Date(license.expiry).toLocaleString()}</p>
                            </div>
                            <span class="px-2 py-1 bg-green-600 text-white text-xs rounded">${license.status}</span>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading licenses:', error);
                document.getElementById('licensesList').innerHTML = '<p class="text-red-400">Error loading licenses. Please check your connection.</p>';
            }
        }

        async function loadUsers() {
            try {
                const response = await fetch('https://api-s736.onrender.com/api/get_users');
                const users = await response.json();
                const usersList = document.getElementById('usersList');
                
                if (users.length === 0) {
                    usersList.innerHTML = '<p class="text-gray-400">No users created yet.</p>';
                    return;
                }
                
                usersList.innerHTML = users.map(user => `
                    <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                        <div class="flex justify-between items-center">
                            <div>
                                <h3 class="font-semibold text-white">${user.username}</h3>
                                <p class="text-gray-400 text-sm">License: ${user.licenseKey}</p>
                                <p class="text-gray-400 text-sm">Expires: ${new Date(user.expiry).toLocaleString()}</p>
                            </div>
                            <span class="px-2 py-1 bg-green-600 text-white text-xs rounded">${user.status}</span>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading users:', error);
                document.getElementById('usersList').innerHTML = '<p class="text-red-400">Error loading users. Please check your connection.</p>';
            }
        }

        async function loadLicenseOptions() {
            try {
                const response = await fetch('https://api-s736.onrender.com/api/get_licenses');
                const licenses = await response.json();
                const select = document.getElementById('userLicenseKey');
                
                select.innerHTML = '<option value="">Select License</option>' +
                    licenses.map(license => `<option value="${license.key}">${license.key}</option>`).join('');
            } catch (error) {
                console.error('Error loading license options:', error);
                document.getElementById('userLicenseKey').innerHTML = '<option value="">Error loading licenses</option>';
            }
        }

        document.getElementById('logoutBtn').addEventListener('click', () => {
            auth.signOut().then(() => {
                window.location.href = 'inbex.html';
            });
        });

        // Mobile sidebar toggle
        document.getElementById('toggleSidebarMobile').addEventListener('click', () => {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.getElementById('toggleSidebarMobileHamburger');
            const close = document.getElementById('toggleSidebarMobileClose');
            
            sidebar.classList.toggle('hidden');
            hamburger.classList.toggle('hidden');
            close.classList.toggle('hidden');
        });

        // Copy to clipboard function
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            let textToCopy;
            
            if (elementId === 'csharp-code') {
                textToCopy = element.textContent;
            } else {
                textToCopy = element.value;
            }
            
            navigator.clipboard.writeText(textToCopy).then(() => {
                // Show success feedback
                const button = event.target.closest('button');
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="ri-check-line mr-1"></i>Copied!';
                button.classList.add('text-green-400');
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.classList.remove('text-green-400');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                alert('Failed to copy to clipboard');
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadLicenses();
            loadUsers();
            loadLicenseOptions();
        });
    </script>
</body>

</html>
